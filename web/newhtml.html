<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
        <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"
        integrity="sha256-xLD7nhI62fcsEZK2/v8LsBcb4lG7dgULkuXoXB/j91c=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    </head>
    <body>

        <div class="container">
            <h1 class="text-center mb-4">Personal Information Form</h1>
            <!--            <form >
                            <div class="row mb-3">
                                <div class="col-md-3">
                                                            <label for="photo" class="form-label">Upload Photo</label>
                                                            <input type="file" name="photo" class="form-control" id="photo">
                                     <img id="preview" src="https://via.placeholder.com/150" alt="Demo Photo" class="mt-3 img-fluid"> 
                                    <img width="64" height="64" src="https://img.icons8.com/pastel-glyph/64/add-male-user.png"
                                         alt="add-male-user" />
                                </div>
                                <div class="col-md-3">
                                    <label for="firstName" class="form-label">First Name</label>
                                    <input type="text" name="firstName" class="form-control" id="firstName" required>
                                </div>
                                <div class="col-md-3">
                                    <label for="middleName" class="form-label">Middle Name</label>
                                    <input type="text" name="middleName" class="form-control" id="middleName" required>
                                </div>
                                <div class="col-md-3">
                                    <label for="lastName" class="form-label">Last Name</label>
                                    <input type="text" name="lastName" class="form-control" id="lastName" required>
                                </div>
                            </div>
                            <div class="row mb-3">
                                                    <div class="col-md-6">
                                                        <label for="dob" class="form-label">Date of Birth</label>
                                                        <input type="date" name="Birth" class="form-control" id="dob" required>
                                                    </div>
                                <div class="col-md-6">
                                    <label for="passport" class="form-label">Passport Number</label>
                                    <input type="text" name="passport" class="form-control" id="passport" required>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-12">
                                    <label for="location" class="form-label">Location</label>
                                    <input type="text" name="location" class="form-control" id="location" required>
                                </div>
            
                                <input type="hidden" name="customData" id="customData" value="">
                            </div>
            
                            <div class="text-center">
                                <button type="button" onclick="onclickbutton()" id="submitButton" class="btn btn-primary">
                                    Submit
                                </button>
            
                            </div>
            
                        </form>-->


            <form>
                <label for="username">Username:</label>
                <input type="text" id="username" name="username" required><br>

                <label for="location">Location:</label>
                <input type="text" id="location" name="location" required><br>
                <input type="hidden" name="customData" value="">

                <!--            <textarea id="w3review" name="w3review" rows="4" cols="50">At w3schools.com you will learn how to make a website. They offer free tutorials in all web development technologies.</textarea>-->

                <button id="submitButton" onclick="onclickbutton()" type="button"> submit</button>
            </form>





            <div id="result" style="display:none;">
                <p> Here all the details related to entered Customer ID.</p>
                <!--                <button type="button" id="closeButton" class="btn btn-secondary">Close</button>-->
            </div>
            <button type="button" id="closeButton" class="btn btn-secondary" style="display:none;">Close</button>

        </div>

        <!--        <script src="/js_file/getSet.js"></script>-->

        <script>

            function setFieldsIncustomData() {
                var name = "p1";
                var s5 = "";
                var s = "";

                var s2 = new Object();
                var c1 = new Object();




                var sk1 = s2[name];

                for (var custKey in sk1) {
                    c1[custKey] = sk1[custKey];
                }

                for (i = 0; i < arguments.length; i++) {
                    var fieldObj = eval("document.forms[0]." + arguments[i]);
                    var fieldVal = "";
                    console.log(fieldObj);
                    if (fieldObj.type === 'checkbox') {
                        if (fieldObj.checked)
                            fieldVal = "on";
                        else
                            fieldVal = "";

                    } else if (typeof (fieldObj.type) === "string") {
                        fieldVal = fieldObj.value;
                    } else
                        fieldVal = getRadioValue(fieldObj);

                    c1[arguments[i]] = fieldVal;
                }

                s2[name] = c1;
                for (var sk2 in s2) {
                    var sk1 = s2[sk2];
                    s5 = sk2;
                    s = s + '~' + s5 + '|';
                    for (var c1Key in sk1) {
                        d1Key = c1Key;
                        d1Value = sk1[c1Key];
                        if (d1Value !== null) {
                            s = s + d1Key + '=' + d1Value + '|';
                        }
                    }
                }
                // document.forms[0].customData.value = s;
//    console.log("print s: " + s)
                alert(s);
                // return s;

            }
            $(document).ready(function () {
                $("#submitButton").click(function () {
                    console.log("here");
////                $("#submitButton").click(function () {
//                var firstName = $("input[name='firstName']").val();
//                var middleName = $("input[name='middleName']").val();
//                var lastName = $("input[name='lastName']").val();
//                var passport = $("input[name='passport']").val();
//                var location = $("input[name='location']").val();

                    //setFieldsIncustomData("firstName","middleName","lastName");
                    setFieldsIncustomData("username", "location");
                    //var id = "2"; // You can set the ID value here
                    //console.log(st);
//                $.ajax({
//                    type: "POST",
//                    url: "BillpayServlet", // Your servlet URL
//                    data: {
//                        firstName: firstName,
//                        middleName: middleName,
//                        lastName: lastName,
//                        passport: passport,
//                        location: location
//                                // id: id
//                    },
//                    // data: st,
//
//                    success: function (response) {
//                        $("#result").html(response);
//
//
//                        $("#f1").trigger("reset");
//                        $("#f1").hide();
//                        $("#result").show();
//                        $("#closeButton").show();
//
//
//                    },
//                    error: function (xhr, status, error) {
//                        $("#result").text("Error: " + error);
//                    }
//                });
//                });
                });
            });

            $("#closeButton").click(function () {
                // Show the original form
                $("#f1").show();
                // Hide the additional content
                $("#result").hide();
                $("#closeButton").hide();
            });



            function getFieldsFromc1() {
                var s = document.forms[0].customData.value;
                var s1 = new Array();
                s1 = s.split('~');
                console.log("s1: " + s1);
                var s1Length = s1.length;
                var s2 = new Object();


                for (var s3 = 1; s3 < s1Length; s3++) {
                    var s4 = s1[s3].split('|');
                    console.log("s4: " + s4);
                    var s5 = s4[0];
                    console.log("s5: " + s5);
                    var length = s4.length;
                    var c1 = new Object();
                    for (var c2 = 1; c2 < length; c2++) {
                        var d1 = s4[c2].split('=');
                        console.log("d1: " + d1);
                        if (d1.length >= 2) {
                            var key = d1[0];
                            d1.shift();
                            var value = d1.join('=');
                            c1[key] = value;
                        }
                    }
                    s2[s5] = c1;

                }
                return s2;
            }

            function getRadioValue(obj) {
                var c = eval("document.forms[0]." + obj.id);
                var a = (typeof (c.length) === "undefined") ? false : true;
                if (!a) {
                    return c.value;
                }
                var d = "";
                if (a && (typeof (c.type) === "undefined")) {
                    for (var b = 0; b < c.length; b++) {
                        if (c[b].checked) {
                            d = c[b].value;
                            break
                        }
                    }
                }
                return d;
            }

        </script>
        <!--         <script src="/js_file/getSet.js"></script>-->



        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
        crossorigin="anonymous"></script>

    </body>


</html>